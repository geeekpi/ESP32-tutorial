
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>SPI Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="I2C.html" />
    
    
    <link rel="prev" href="./" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="2.1" data-path="../Installation/">
            
                <a href="../Installation/">
            
                    
                    Installation
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1.1" data-path="../Installation/Windows.html">
            
                <a href="../Installation/Windows.html">
            
                    
                    Windows
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.2" data-path="../Installation/MacOS.html">
            
                <a href="../Installation/MacOS.html">
            
                    
                    Mac OS
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.3" data-path="../Installation/Linux.html">
            
                <a href="../Installation/Linux.html">
            
                    
                    Linux
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="../IO/">
            
                <a href="../IO/">
            
                    
                    IO
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.2.1" data-path="../IO/GPIO.html">
            
                <a href="../IO/GPIO.html">
            
                    
                    GPIO
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.2" data-path="../IO/PWM.html">
            
                <a href="../IO/PWM.html">
            
                    
                    PWM
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.3" data-path="../IO/ADC.html">
            
                <a href="../IO/ADC.html">
            
                    
                    ADC
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="../General/">
            
                <a href="../General/">
            
                    
                    General
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.3.1" data-path="../General/Dealy.html">
            
                <a href="../General/Dealy.html">
            
                    
                    Delay
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3.2" data-path="../General/Timer.html">
            
                <a href="../General/Timer.html">
            
                    
                    Timer
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3.3" data-path="../General/RTC.html">
            
                <a href="../General/RTC.html">
            
                    
                    RTC
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3.4" data-path="../General/Deep-sleep.html">
            
                <a href="../General/Deep-sleep.html">
            
                    
                    Deep-sleep
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.4" data-path="../Network/">
            
                <a href="../Network/">
            
                    
                    Network
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.4.1" data-path="../Network/WIFI.html">
            
                <a href="../Network/WIFI.html">
            
                    
                    WIFI
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.4.2" data-path="../Network/requests.html">
            
                <a href="../Network/requests.html">
            
                    
                    requests
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.5" data-path="../Sensor/">
            
                <a href="../Sensor/">
            
                    
                    Sensor
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.5.1" data-path="../Sensor/DHT.html">
            
                <a href="../Sensor/DHT.html">
            
                    
                    DHT
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.5.2" data-path="../Sensor/DS18x20.html">
            
                <a href="../Sensor/DS18x20.html">
            
                    
                    DS18x20
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.6" data-path="./">
            
                <a href="./">
            
                    
                    BUS
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="2.6.1" data-path="SPI.html">
            
                <a href="SPI.html">
            
                    
                    SPI
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.6.2" data-path="I2C.html">
            
                <a href="I2C.html">
            
                    
                    I2C
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.6.3" data-path="OneWire.html">
            
                <a href="OneWire.html">
            
                    
                    OneWire
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >SPI</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="spi">SPI</h1>
<h2 id="software-spi-bus">Software SPI bus</h2>
<p>There are two SPI drivers. One is implemented in software (bit-banging) and works on all pins, and is accessed via the machine.SPI class:</p>
<pre><code class="lang-python"><span class="hljs-keyword">from</span> machine <span class="hljs-keyword">import</span> Pin, SPI

<span class="hljs-comment"># construct an SPI bus on the given pins</span>
<span class="hljs-comment"># polarity is the idle state of SCK</span>
<span class="hljs-comment"># phase=0 means sample on the first edge of SCK, phase=1 means the second</span>
spi = SPI(<span class="hljs-number">-1</span>, baudrate=<span class="hljs-number">100000</span>, polarity=<span class="hljs-number">1</span>, phase=<span class="hljs-number">0</span>, sck=Pin(<span class="hljs-number">0</span>), mosi=Pin(<span class="hljs-number">2</span>), miso=Pin(<span class="hljs-number">4</span>))

spi.init(baudrate=<span class="hljs-number">200000</span>) <span class="hljs-comment"># set the baudrate</span>

spi.read(<span class="hljs-number">10</span>)            <span class="hljs-comment"># read 10 bytes on MISO</span>
spi.read(<span class="hljs-number">10</span>, <span class="hljs-number">0xff</span>)      <span class="hljs-comment"># read 10 bytes while outputing 0xff on MOSI</span>

buf = bytearray(<span class="hljs-number">50</span>)     <span class="hljs-comment"># create a buffer</span>
spi.readinto(buf)       <span class="hljs-comment"># read into the given buffer (reads 50 bytes in this case)</span>
spi.readinto(buf, <span class="hljs-number">0xff</span>) <span class="hljs-comment"># read into the given buffer and output 0xff on MOSI</span>

spi.write(<span class="hljs-string">b&apos;12345&apos;</span>)     <span class="hljs-comment"># write 5 bytes on MOSI</span>

buf = bytearray(<span class="hljs-number">4</span>)      <span class="hljs-comment"># create a buffer</span>
spi.write_readinto(<span class="hljs-string">b&apos;1234&apos;</span>, buf) <span class="hljs-comment"># write to MOSI and read from MISO into the buffer</span>
spi.write_readinto(buf, buf) <span class="hljs-comment"># write buf to MOSI and read MISO back into buf</span>
</code></pre>
<h2 id="hardware-spi-bus">Hardware SPI bus</h2>
<p>The hardware SPI is faster (up to 80Mhz), but only works on following pins: MISO is GPIO12, MOSI is GPIO13, and SCK is GPIO14. It has the same methods as the bitbanging SPI class above, except for the pin parameters for the constructor and init (as those are fixed):</p>
<pre><code class="lang-python"><span class="hljs-keyword">from</span> machine <span class="hljs-keyword">import</span> Pin, SPI

hspi = SPI(<span class="hljs-number">1</span>, baudrate=<span class="hljs-number">80000000</span>, polarity=<span class="hljs-number">0</span>, phase=<span class="hljs-number">0</span>)
</code></pre>
<p><code>SPI(0)</code> is used for FlashROM and not available to users.</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="./" class="navigation navigation-prev " aria-label="Previous page: BUS">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="I2C.html" class="navigation navigation-next " aria-label="Next page: I2C">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"SPI","level":"2.6.1","depth":2,"next":{"title":"I2C","level":"2.6.2","depth":2,"path":"BUS/I2C.md","ref":"BUS/I2C.md","articles":[]},"previous":{"title":"BUS","level":"2.6","depth":1,"path":"BUS/README.md","ref":"BUS/README.md","articles":[{"title":"SPI","level":"2.6.1","depth":2,"path":"BUS/SPI.md","ref":"BUS/SPI.md","articles":[]},{"title":"I2C","level":"2.6.2","depth":2,"path":"BUS/I2C.md","ref":"BUS/I2C.md","articles":[]},{"title":"OneWire","level":"2.6.3","depth":2,"path":"BUS/OneWire.md","ref":"BUS/OneWire.md","articles":[]}]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":[],"pluginsConfig":{"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"BUS/SPI.md","mtime":"2017-12-03T13:35:59.000Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2017-12-14T14:07:44.086Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

